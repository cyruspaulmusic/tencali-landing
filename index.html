<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tencali Landing v01</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html, body { width: 100%; height: 100%; font-family: sans-serif; background: #fff; display: flex; justify-content: center; align-items: center; overflow: hidden; }

  .page { position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; flex-direction: column; background: #fff; transition: opacity 1s ease; }
  .hidden { opacity: 0; pointer-events: none; }
  .visible { opacity: 1; pointer-events: all; }

  /* Página 1 — Código */
  #codePage input { 
    width: 60px; height: 60px; margin: 0 10px; font-size: 2rem; text-align: center; border: 2px solid #000; 
  }

  /* Vibración en error */
  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    50% { transform: translateX(5px); }
    75% { transform: translateX(-5px); }
    100% { transform: translateX(0); }
  }
  .shake { animation: shake 0.3s; }

  /* Página 2 — Imagen + Texto */
  #arrivedPage img { max-width: 80%; max-height: 60%; opacity: 0; transform: scale(1.1); transition: opacity 2s ease, transform 2s ease; }
  #arrivedPage img.show { opacity: 1; transform: scale(1); }

  #arrivedPage h1 { font-size: 3rem; margin-top: 20px; opacity: 0; transition: opacity 5s ease; }

</style>
</head>
<body>

<!-- Página 1 -->
<div id="codePage" class="page visible">
  <div>
    <input type="text" maxlength="1" />
    <input type="text" maxlength="1" />
    <input type="text" maxlength="1" />
    <input type="text" maxlength="1" />
  </div>
</div>

<!-- Página 2 -->
<div id="arrivedPage" class="page hidden">
  <img src="Tencali_0061.jpg" alt="Tencali">
  <h1>Acabo De Llegar</h1>
  <audio id="audio" src="TCO_Ascension_PAGINA WEB_v01.wav"></audio>
</div>

<script>
const codePage = document.getElementById('codePage');
const arrivedPage = document.getElementById('arrivedPage');
const inputs = codePage.querySelectorAll('input');
const correctCode = ['G','E','0','0'];
const img = arrivedPage.querySelector('img');
const text = arrivedPage.querySelector('h1');
const audio = document.getElementById('audio');

// Función para leer el código y validar
function checkCode() {
  const entered = Array.from(inputs).map(i => i.value.toUpperCase());
  if(entered.join('') === correctCode.join('')) {
    // Fade out Página 1
    codePage.classList.remove('visible');
    codePage.classList.add('hidden');
    setTimeout(showArrivedPage, 1000); // espera fade de 1s
  } else {
    // Error: vibración y parpadeo
    codePage.classList.add('shake');
    setTimeout(() => codePage.classList.remove('shake'), 300);
    inputs.forEach(i => i.value = '');
  }
}

// Mostrar Página 2
function showArrivedPage() {
  arrivedPage.classList.remove('hidden');
  arrivedPage.classList.add('visible');

  // Imagen fade-in + zoom out
  setTimeout(() => img.classList.add('show'), 100);

  // Texto fade-in lento
  setTimeout(() => text.style.opacity = 1, 1000);

  // Audio con fade-in
  audio.volume = 0;
  audio.play();
  let vol = 0;
  const fadeIn = setInterval(() => {
    if(vol < 1) {
      vol += 0.02;
      audio.volume = vol;
    } else clearInterval(fadeIn);
  }, 50);

  // Al terminar ~20s → fade out y volver Página 1
  setTimeout(() => {
    fadeOutArrivedPage();
  }, 20000);
}

function fadeOutArrivedPage() {
  // Audio fade out
  let vol = audio.volume;
  const fadeOut = setInterval(() => {
    if(vol > 0) {
      vol -= 0.02;
      audio.volume = vol;
    } else {
      clearInterval(fadeOut);
      audio.pause();
      audio.currentTime = 0;
    }
  }, 50);

  // Fade out visual
  arrivedPage.classList.remove('visible');
  arrivedPage.classList.add('hidden');
  setTimeout(resetToPage1, 1000); // espera 1s fade
}

function resetToPage1() {
  // Reset inputs y estilos
  inputs.forEach(i => i.value = '');
  img.classList.remove('show');
  text.style.opacity = 0;

  // Volver Página 1
  codePage.classList.remove('hidden');
  codePage.classList.add('visible');
}

// Evento enter en cada input
inputs.forEach((input, idx) => {
  input.addEventListener('input', () => {
    if(input.value.length === 1 && idx < inputs.length-1) {
      inputs[idx+1].focus();
    }
    if(Array.from(inputs).every(i => i.value.length === 1)) {
      checkCode();
    }
  });
});

</script>
</body>
</html>
